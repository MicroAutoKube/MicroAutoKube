(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[919],{4006:(e,l,s)=>{"use strict";s.d(l,{default:()=>a});var r=s(5155),o=s(5695);let a=e=>{let{icon:l,text:s,route:a}=e,t=(0,o.useRouter)();return(0,r.jsxs)("button",{onClick:()=>t.push(a),className:"flex items-center w-full text-left px-4 py-3 text-white rounded-lg transition-all duration-300 hover:bg-gray-700 hover:scale-105 active:scale-95",children:[(0,r.jsx)("span",{className:"text-lg mr-3",children:l}),(0,r.jsx)("span",{className:"font-medium",children:s})]})}},4566:(e,l,s)=>{"use strict";s.d(l,{default:()=>p});var r=s(5155),o=s(2115);let a=e=>{let{mode:l,setMode:s}=e,o=e=>"px-4 py-2 rounded text-xl font-bold transition ".concat(l===e?"text-[#58F5FF]":"text-white ");return(0,r.jsxs)("div",{className:"flex flex-col items-start border rounded-xl px-2 min-w-[200px] h-fit mt-5",children:[(0,r.jsxs)("button",{onClick:()=>s("configuration"),className:o("configuration"),children:["configuration"===l&&"●"," Configuration"]}),(0,r.jsxs)("button",{onClick:()=>s("application"),className:o("application"),children:["application"===l&&"●"," Application"]}),(0,r.jsxs)("button",{onClick:()=>s("logs"),className:o("logs"),children:["logs"===l&&"●"," Logs"]})]})};var t=s(5799),i=s(9911);let n=e=>{var l,s,a,n,c,d,u,g,v,p,m,x,h,b,f,y,j,N,C,k,w,P,R,S,E,A,D,T,I,L,_,F,O,z,M,U,K,G,H,V,J,q,B,Q,W,X,Y,Z,$,ee,el,es,er,eo;let{cluster:ea,setMode:et}=e,[ei,en]=(0,o.useState)(null!==(K=null===(s=ea.clusterConfig)||void 0===s?void 0:null===(l=s.helm)||void 0===l?void 0:l.enabled)&&void 0!==K&&K),[ec,ed]=(0,o.useState)({enabled:null!==(G=null===(n=ea.clusterConfig)||void 0===n?void 0:null===(a=n.registry)||void 0===a?void 0:a.enabled)&&void 0!==G&&G,namespace:null!==(H=null===(d=ea.clusterConfig)||void 0===d?void 0:null===(c=d.registry)||void 0===c?void 0:c.namespace)&&void 0!==H?H:"kube-system",storageClass:null!==(V=null===(g=ea.clusterConfig)||void 0===g?void 0:null===(u=g.registry)||void 0===u?void 0:u.storageClass)&&void 0!==V?V:"",diskSize:null!==(J=null===(p=ea.clusterConfig)||void 0===p?void 0:null===(v=p.registry)||void 0===v?void 0:v.diskSize)&&void 0!==J?J:"10Gi"}),[eu,eg]=(0,o.useState)({enabled:null!==(q=null===(x=ea.clusterConfig)||void 0===x?void 0:null===(m=x.metrics)||void 0===m?void 0:m.enabled)&&void 0!==q&&q,containerPort:null!==(B=null===(b=ea.clusterConfig)||void 0===b?void 0:null===(h=b.metrics)||void 0===h?void 0:h.containerPort)&&void 0!==B?B:10250,kubeletInsecureTls:null!==(Q=null===(y=ea.clusterConfig)||void 0===y?void 0:null===(f=y.metrics)||void 0===f?void 0:f.kubeletInsecureTls)&&void 0!==Q&&Q,metricResolution:null!==(W=null===(N=ea.clusterConfig)||void 0===N?void 0:null===(j=N.metrics)||void 0===j?void 0:j.metricResolution)&&void 0!==W?W:15,hostNetwork:null!==(X=null===(k=ea.clusterConfig)||void 0===k?void 0:null===(C=k.metrics)||void 0===C?void 0:C.hostNetwork)&&void 0!==X&&X,replicas:null!==(Y=null===(P=ea.clusterConfig)||void 0===P?void 0:null===(w=P.metrics)||void 0===w?void 0:w.replicas)&&void 0!==Y?Y:1}),[ev,ep]=(0,o.useState)({enabled:null!==(Z=null===(S=ea.clusterConfig)||void 0===S?void 0:null===(R=S.localPathProvisioner)||void 0===R?void 0:R.enabled)&&void 0!==Z&&Z,namespace:null!==($=null===(A=ea.clusterConfig)||void 0===A?void 0:null===(E=A.localPathProvisioner)||void 0===E?void 0:E.namespace)&&void 0!==$?$:"local-path-storage",storageClass:null!==(ee=null===(T=ea.clusterConfig)||void 0===T?void 0:null===(D=T.localPathProvisioner)||void 0===D?void 0:D.storageClass)&&void 0!==ee?ee:"local-path",reclaim_policy:null!==(el=null===(L=ea.clusterConfig)||void 0===L?void 0:null===(I=L.localPathProvisioner)||void 0===I?void 0:I.reclaim_policy)&&void 0!==el?el:"Delete",claimRoot:null!==(es=null===(F=ea.clusterConfig)||void 0===F?void 0:null===(_=F.localPathProvisioner)||void 0===_?void 0:_.claimRoot)&&void 0!==es?es:"/opt/local-path-provisioner/",debug:null!==(er=null===(z=ea.clusterConfig)||void 0===z?void 0:null===(O=z.localPathProvisioner)||void 0===O?void 0:O.debug)&&void 0!==er&&er}),[em,ex]=(0,o.useState)(null!==(eo=null===(U=ea.clusterApp)||void 0===U?void 0:null===(M=U.kubesphere)||void 0===M?void 0:M.enabled)&&void 0!==eo&&eo),eh=async()=>{try{let e=await fetch("/api/clusters/config/".concat(ea.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({helm:{enabled:ei},registry:ec,metrics:eu,localPathProvisioner:ev})});if(!e.ok){let l=await e.json();return console.error("Failed to save config:",l),t.oR.error("❌ Failed to save configuration."),!1}let l=await e.json();return console.log("✅ Configuration saved:",l),t.oR.success("✅ Configuration saved successfully!"),!0}catch(e){return console.error("API error:",e),t.oR.error("❌ An error occurred while saving configuration."),!1}},eb=async()=>{try{let e=await fetch("/api/clusters/app/".concat(ea.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({kubesphere:{enabled:em}})});if(!e.ok){let l=await e.json();return console.error("Failed to save app config:",l),t.oR.error("❌ Failed to save app config."),!1}return t.oR.success("✅ Application config saved!"),!0}catch(e){return console.error("API error:",e),t.oR.error("❌ Error saving application config."),!1}},ef=()=>{et("logs"),setTimeout(()=>{window.dispatchEvent(new CustomEvent("trigger-run-script",{detail:ea.id}))},100)};return(0,r.jsxs)("div",{className:"flex-1 px-10 py-6 text-white w-full",children:[(0,r.jsx)("h2",{className:"text-3xl font-bold mb-6",children:"\uD83D\uDEE0️ Cluster Configuration"}),(0,r.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg border border-gray-700 shadow-inner mb-6",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold mb-4 border-b border-gray-600 pb-2",children:"General Info"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-y-3 gap-x-6 text-sm",children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{className:"text-gray-400",children:"Name:"})," ",ea.name]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{className:"text-gray-400",children:"Kubernetes Version:"})," ",ea.kubernetesVersion]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{className:"text-gray-400",children:"Container Runtime:"})," ",ea.containerRuntime]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{className:"text-gray-400",children:"Container Version:"})," ",ea.containerVersion]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{className:"text-gray-400",children:"Cluster Status:"})," ",ea.ready?(0,r.jsx)("span",{className:"text-green-400 font-medium",children:"✅ Ready"}):(0,r.jsx)("span",{className:"text-yellow-400 font-medium",children:"⏳ Not Ready"})]})]})]}),(0,r.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg border border-gray-700 shadow-inner mb-6",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold mb-4 border-b border-gray-600 pb-2",children:"\uD83D\uDD17 Nodes"}),0===ea.nodes.length?(0,r.jsx)("p",{className:"text-gray-400",children:"No nodes found."}):(0,r.jsx)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:ea.nodes.map(e=>(0,r.jsxs)("div",{className:"bg-gray-900 border border-gray-700 rounded-lg p-4 hover:border-blue-500 transition",children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{className:"text-gray-400",children:"Hostname:"})," ",e.hostname]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{className:"text-gray-400",children:"IP Address:"})," ",e.ipAddress]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{className:"text-gray-400",children:"Role:"})," ",e.role]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{className:"text-gray-400",children:"Auth Type:"})," ",e.authType]})]},e.id))})]}),(0,r.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg border border-gray-700 shadow-inner mb-6",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold mb-4 border-b border-gray-600 pb-2",children:"⚙️ Add-ons Configuration"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("label",{className:"flex gap-3 flex-col justify-center items-start",children:[(0,r.jsx)("input",{type:"checkbox",checked:ei,onChange:()=>en(!ei)}),"Enable Helm"]}),(0,r.jsxs)("label",{className:"flex gap-3 flex-col justify-center items-start",children:[(0,r.jsx)("input",{type:"checkbox",checked:ec.enabled,onChange:()=>ed({...ec,enabled:!ec.enabled})}),"Enable Registry"]}),ec.enabled&&(0,r.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,r.jsxs)("label",{className:"flex gap-3 flex-col justify-center items-start",children:[(0,r.jsx)("span",{className:"text-sm text-gray-400",children:"Namespace"}),(0,r.jsx)("input",{className:"p-2 bg-gray-900 border border-gray-700 rounded",value:ec.namespace,onChange:e=>ed({...ec,namespace:e.target.value}),placeholder:"Namespace"})]}),(0,r.jsxs)("label",{className:"flex gap-3 flex-col justify-center items-start",children:[(0,r.jsx)("span",{className:"text-sm text-gray-400",children:"Storage Class"}),(0,r.jsx)("input",{className:"p-2 bg-gray-900 border border-gray-700 rounded",value:ec.storageClass,onChange:e=>ed({...ec,storageClass:e.target.value}),placeholder:"Storage Class"})]}),(0,r.jsxs)("label",{className:"flex gap-3 flex-col justify-center items-start",children:[(0,r.jsx)("span",{className:"text-sm text-gray-400",children:"Disk Size"}),(0,r.jsx)("input",{className:"p-2 bg-gray-900 border border-gray-700 rounded",value:ec.diskSize,onChange:e=>ed({...ec,diskSize:e.target.value}),placeholder:"Disk Size"})]})]}),(0,r.jsxs)("label",{className:"flex gap-3 flex-col justify-center items-start",children:[(0,r.jsx)("input",{type:"checkbox",checked:eu.enabled,onChange:()=>eg({...eu,enabled:!eu.enabled})}),"Enable Metrics"]}),eu.enabled&&(0,r.jsxs)("div",{className:"flex gap-5 items-start",children:[(0,r.jsxs)("label",{className:"flex gap-3 flex-col justify-center items-start",children:[(0,r.jsx)("span",{className:"text-sm text-gray-400",children:"Container Port"}),(0,r.jsx)("input",{className:"p-2 bg-gray-900 border border-gray-700 rounded",value:eu.containerPort,onChange:e=>eg({...eu,containerPort:Number(e.target.value)}),placeholder:"Container Port"})]}),(0,r.jsxs)("label",{className:"flex gap-3 flex-col justify-center items-start",children:[(0,r.jsx)("span",{className:"text-sm text-gray-400",children:"Kubelet Insecure TLS"}),(0,r.jsx)("input",{type:"checkbox",checked:eu.kubeletInsecureTls,onChange:e=>eg({...eu,kubeletInsecureTls:e.target.checked})})]}),(0,r.jsxs)("label",{className:"flex gap-3 flex-col justify-center items-start",children:[(0,r.jsx)("span",{className:"text-sm text-gray-400",children:"Metric Resolution"}),(0,r.jsx)("input",{className:"p-2 bg-gray-900 border border-gray-700 rounded",value:eu.metricResolution,onChange:e=>eg({...eu,metricResolution:Number(e.target.value)}),placeholder:"Metric Resolution"})]}),(0,r.jsxs)("label",{className:"flex gap-3 flex-col justify-center items-start",children:[(0,r.jsx)("span",{className:"text-sm text-gray-400",children:"Host Network"}),(0,r.jsx)("input",{type:"checkbox",checked:eu.hostNetwork,onChange:e=>eg({...eu,hostNetwork:e.target.checked})})]}),(0,r.jsxs)("label",{className:"flex gap-3 flex-col justify-center items-start",children:[(0,r.jsx)("span",{className:"text-sm text-gray-400",children:"Replicas"}),(0,r.jsx)("input",{className:"p-2 bg-gray-900 border border-gray-700 rounded",value:eu.replicas,onChange:e=>eg({...eu,replicas:Number(e.target.value)}),placeholder:"Replicas"})]})]}),(0,r.jsxs)("label",{className:"flex gap-3 flex-col justify-center items-start",children:[(0,r.jsx)("input",{type:"checkbox",checked:ev.enabled,onChange:()=>ep({...ev,enabled:!ev.enabled})}),"Enable Local Path Provisioner"]}),ev.enabled&&(0,r.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,r.jsxs)("label",{className:"flex gap-3 flex-col justify-center items-start",children:[(0,r.jsx)("span",{className:"text-sm text-gray-400",children:"Namespace"}),(0,r.jsx)("input",{className:"p-2 bg-gray-900 border border-gray-700 rounded",value:ev.namespace,onChange:e=>ep({...ev,namespace:e.target.value}),placeholder:"Namespace"})]}),(0,r.jsxs)("label",{className:"flex gap-3 flex-col justify-center items-start",children:[(0,r.jsx)("span",{className:"text-sm text-gray-400",children:"Storage Class"}),(0,r.jsx)("input",{className:"p-2 bg-gray-900 border border-gray-700 rounded",value:ev.storageClass,onChange:e=>ep({...ev,storageClass:e.target.value}),placeholder:"Storage Class"})]}),(0,r.jsxs)("label",{className:"flex gap-3 flex-col justify-center items-start",children:[(0,r.jsx)("span",{className:"text-sm text-gray-400",children:"Reclaim Policy"}),(0,r.jsx)("input",{className:"p-2 bg-gray-900 border border-gray-700 rounded",value:ev.reclaim_policy,onChange:e=>ep({...ev,reclaim_policy:e.target.value}),placeholder:"Reclaim Policy"})]}),(0,r.jsxs)("label",{className:"flex gap-3 flex-col justify-center items-start",children:[(0,r.jsx)("span",{className:"text-sm text-gray-400",children:"Claim Root"}),(0,r.jsx)("input",{className:"p-2 bg-gray-900 border border-gray-700 rounded",value:ev.claimRoot,onChange:e=>ep({...ev,claimRoot:e.target.value}),placeholder:"Claim Root"})]})]})]})]}),(0,r.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg border border-gray-700 shadow-inner mb-6 mt-6",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold mb-4 border-b border-gray-600 pb-2",children:"\uD83E\uDDE9 Applications"}),(0,r.jsxs)("label",{className:"flex gap-3 flex-col justify-center items-start",children:[(0,r.jsx)("input",{type:"checkbox",checked:em,onChange:()=>ex(!em)}),"Enable KubeSphere"]})]}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,r.jsxs)("button",{onClick:()=>{var e,l,s,r,o,a,t,i,n,c,d,u,g,v,p,m,x,h,b,f,y,j,N,C,k,w,P,R,S,E,A,D,T,I,L,_,F,O,z,M,U,K,G,H,V,J,q,B,Q,W,X,Y,Z,$;en(null!==(F=null===(l=ea.clusterConfig)||void 0===l?void 0:null===(e=l.helm)||void 0===e?void 0:e.enabled)&&void 0!==F&&F),ed({enabled:null!==(O=null===(r=ea.clusterConfig)||void 0===r?void 0:null===(s=r.registry)||void 0===s?void 0:s.enabled)&&void 0!==O&&O,namespace:null!==(z=null===(a=ea.clusterConfig)||void 0===a?void 0:null===(o=a.registry)||void 0===o?void 0:o.namespace)&&void 0!==z?z:"kube-system",storageClass:null!==(M=null===(i=ea.clusterConfig)||void 0===i?void 0:null===(t=i.registry)||void 0===t?void 0:t.storageClass)&&void 0!==M?M:"",diskSize:null!==(U=null===(c=ea.clusterConfig)||void 0===c?void 0:null===(n=c.registry)||void 0===n?void 0:n.diskSize)&&void 0!==U?U:"10Gi"}),eg({enabled:null!==(K=null===(u=ea.clusterConfig)||void 0===u?void 0:null===(d=u.metrics)||void 0===d?void 0:d.enabled)&&void 0!==K&&K,containerPort:null!==(G=null===(v=ea.clusterConfig)||void 0===v?void 0:null===(g=v.metrics)||void 0===g?void 0:g.containerPort)&&void 0!==G?G:10250,kubeletInsecureTls:null!==(H=null===(m=ea.clusterConfig)||void 0===m?void 0:null===(p=m.metrics)||void 0===p?void 0:p.kubeletInsecureTls)&&void 0!==H&&H,metricResolution:null!==(V=null===(h=ea.clusterConfig)||void 0===h?void 0:null===(x=h.metrics)||void 0===x?void 0:x.metricResolution)&&void 0!==V?V:15,hostNetwork:null!==(J=null===(f=ea.clusterConfig)||void 0===f?void 0:null===(b=f.metrics)||void 0===b?void 0:b.hostNetwork)&&void 0!==J&&J,replicas:null!==(q=null===(j=ea.clusterConfig)||void 0===j?void 0:null===(y=j.metrics)||void 0===y?void 0:y.replicas)&&void 0!==q?q:1}),ep({enabled:null!==(B=null===(C=ea.clusterConfig)||void 0===C?void 0:null===(N=C.localPathProvisioner)||void 0===N?void 0:N.enabled)&&void 0!==B&&B,namespace:null!==(Q=null===(w=ea.clusterConfig)||void 0===w?void 0:null===(k=w.localPathProvisioner)||void 0===k?void 0:k.namespace)&&void 0!==Q?Q:"local-path-storage",storageClass:null!==(W=null===(R=ea.clusterConfig)||void 0===R?void 0:null===(P=R.localPathProvisioner)||void 0===P?void 0:P.storageClass)&&void 0!==W?W:"local-path",reclaim_policy:null!==(X=null===(E=ea.clusterConfig)||void 0===E?void 0:null===(S=E.localPathProvisioner)||void 0===S?void 0:S.reclaim_policy)&&void 0!==X?X:"Delete",claimRoot:null!==(Y=null===(D=ea.clusterConfig)||void 0===D?void 0:null===(A=D.localPathProvisioner)||void 0===A?void 0:A.claimRoot)&&void 0!==Y?Y:"/opt/local-path-provisioner/",debug:null!==(Z=null===(I=ea.clusterConfig)||void 0===I?void 0:null===(T=I.localPathProvisioner)||void 0===T?void 0:T.debug)&&void 0!==Z&&Z}),ex(null!==($=null===(_=ea.clusterApp)||void 0===_?void 0:null===(L=_.kubesphere)||void 0===L?void 0:L.enabled)&&void 0!==$&&$)},className:"mt-4 flex items-center gap-2 bg-gray-600 hover:bg-gray-700 text-white py-2 px-6 rounded-md transition",children:[(0,r.jsx)(i.LF8,{}),"Reset Configuration"]}),(0,r.jsxs)("button",{onClick:async()=>{t.oR.info("\uD83D\uDCE1 Saving cluster and app config...");let e=await eh(),l=await eb();e&&l?(t.oR.success("✅ Configuration saved. Starting deployment..."),ef()):t.oR.error("❌ Could not start deployment due to save error.")},className:"mt-4 flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white py-2 px-6 rounded-md transition",children:[(0,r.jsx)(i.dIn,{}),"Save & Run Script"]})]})]})};var c=s(4298);function d(e){let{id:l}=e,[s,a]=(0,o.useState)([]),[t,i]=(0,o.useState)(null),[n,d]=(0,o.useState)(!0),u=(0,o.useRef)(null);return(0,o.useEffect)(()=>{let e=(0,c.io)({path:"/api/socket"});i(e),e.on("log",e=>{a(l=>[...l,e])}),e.emit("request-logs",l);let s=s=>{s.detail===l&&(a([]),e.emit("run-script",l))};return window.addEventListener("trigger-run-script",s),()=>{window.removeEventListener("trigger-run-script",s),e.disconnect()}},[]),(0,o.useEffect)(()=>{if(!n)return;let e=u.current;e&&requestAnimationFrame(()=>{e.scrollTop=e.scrollHeight})},[s,n]),(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsx)("div",{ref:u,className:"mt-4 bg-black w-full text-green-400 font-mono p-4 rounded h-[50vh] overflow-y-auto whitespace-pre-wrap border border-gray-700 shadow-inner",children:s.map((e,l)=>{let s=e.includes("stderr")||e.toLowerCase().includes("error")||e.includes("❌"),o=e.includes("✅");return(0,r.jsx)("div",{className:s?"text-red-400":o?"text-green-400":"",children:e},l)})}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-4 mt-10",children:[(0,r.jsx)("button",{onClick:()=>{let e=new Blob([s.join("\n")],{type:"text/plain;charset=utf-8"}),r=window.URL.createObjectURL(e),o=document.createElement("a");o.href=r,o.download="cluster-".concat(l,"-logs.txt"),document.body.appendChild(o),o.click(),o.remove(),window.URL.revokeObjectURL(r)},className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded",children:"\uD83D\uDCE5 Download Logs"}),(0,r.jsx)("button",{onClick:()=>d(e=>!e),className:"bg-blue-500 hover:bg-blue-700 text-white px-4 py-2 rounded",children:n?"\uD83D\uDED1 Stop Scroll":"\uD83D\uDCDC Follow Scroll"}),(0,r.jsx)("button",{onClick:()=>null==t?void 0:t.emit("kill-script",l),className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded",children:"Kill Script"}),(0,r.jsx)("button",{onClick:()=>{null==t||t.emit("clear-logs",l),a([])},className:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded",children:"Clear Logs"})]})]})}var u=s(6766);let g=[{key:"prometheus",name:"Prometheus",port:30100,icon:"/icons/prometheus.svg"},{key:"grafana",name:"Grafana",port:30300,icon:"/icons/grafana.svg"},{key:"percona",name:"Percona Everest",port:30540,icon:"/icons/percona.svg"},{key:"rancher",name:"Rancher",port:30240,icon:"/icons/rancher.svg"},{key:"kubesphere",name:"Kube Sphere",port:30880,icon:"/icons/kubesphere.png"},{key:"istio",name:"Istio",port:30654,icon:"/icons/istio.svg"},{key:"jenkins",name:"Jenkins",port:31567,icon:"/icons/jenkins.svg"},{key:"minio",name:"Minio",port:31234,icon:"/icons/minio.svg"},{key:"argocd",name:"ArgoCd",port:30585,icon:"/icons/argocd.svg"}],v=e=>{let{cluster:l}=e,[s,a]=(0,o.useState)({}),t=l.nodes.find(e=>"MASTER"===e.role),i=(null==t?void 0:t.ipAddress)||"0.0.0.0";return((0,o.useEffect)(()=>{l.ready&&(async()=>{let e={};await Promise.all(g.filter(e=>{if("kubesphere"===e.key){var s,r;return null===(r=l.clusterApp)||void 0===r?void 0:null===(s=r.kubesphere)||void 0===s?void 0:s.enabled}return!1}).map(async l=>{let s="http://".concat(i,":").concat(l.port);try{let r=await fetch("/api/ping-app?url=".concat(encodeURIComponent(s))),o=await r.json();e[l.key]=o.reachable}catch(s){e[l.key]=!1}})),a(e)})()},[i,l]),l.ready)?(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6 p-6",children:g.filter(e=>{if("kubesphere"===e.key){var s,r;return null===(r=l.clusterApp)||void 0===r?void 0:null===(s=r.kubesphere)||void 0===s?void 0:s.enabled}return!1}).map(e=>{let l="http://".concat(i,":").concat(e.port),o=s[e.key];return(0,r.jsxs)("div",{className:"rounded-2xl shadow-md bg-gradient-to-b from-black/40 to-black/70 p-4 text-white flex flex-col items-center",children:[(0,r.jsx)(u.default,{src:e.icon,alt:e.name,width:48,height:48,className:"mb-2"}),(0,r.jsxs)("div",{className:"text-lg font-semibold flex items-center gap-2",children:[e.name,(0,r.jsxs)("span",{className:"text-xs ".concat(o?"text-green-400":"text-red-400"),children:["● ",o?"Online":"Offline"]})]}),(0,r.jsxs)("div",{className:"text-sm text-gray-300 mb-2",children:["IP : ",i,":",e.port]}),(0,r.jsx)("a",{href:l,target:"_blank",rel:"noopener noreferrer",className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-1 rounded-full mt-auto transition",children:"Open"})]},e.key)})}):(0,r.jsx)("p",{className:"text-center text-gray-500 text-3xl font-bold mt-8",children:"⏳ Cluster is not ready yet..."})},p=e=>{let{id:l}=e,[s,i]=(0,o.useState)("configuration"),[c,u]=(0,o.useState)(),g=async()=>{try{let e=await fetch("/api/clusters?id=".concat(l));if(!e.ok)throw Error("Failed to fetch clusters");let s=await e.json();u(s)}catch(e){console.error("Error fetching clusters:",e),t.oR.error("❌ Error fetching cluster list")}};return(0,o.useEffect)(()=>{g()},[s]),(0,r.jsxs)("div",{className:"grid grid-cols-7 min-h-[50vh]",children:[(0,r.jsx)("div",{className:"col-span-1",children:(0,r.jsx)(a,{mode:s,setMode:i})}),(0,r.jsxs)("div",{className:"col-span-6",children:["configuration"===s&&c&&(0,r.jsx)(n,{cluster:c,setMode:i}),"application"===s&&c&&(0,r.jsx)(v,{cluster:c}),"logs"===s&&c&&(0,r.jsx)(d,{id:l})]})]})}},8933:(e,l,s)=>{Promise.resolve().then(s.bind(s,4566)),Promise.resolve().then(s.bind(s,4006))}},e=>{var l=l=>e(e.s=l);e.O(0,[711,63,799,238,441,684,358],()=>l(8933)),_N_E=e.O()}]);